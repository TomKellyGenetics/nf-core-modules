process {

    publishDir = { "${params.outdir}/${task.process.tokenize(':')[-1].tokenize('_')[0].toLowerCase()}" }

    withName: UNIVERSC_LAUNCH {
        ext.args = ''
    }

    withName: CELLRANGER_MKGTF {
        container "nfcore/universc:1.2.4"
        if (workflow.containerEngine == 'docker'){
            containerOptions = "--user root"
        }
       if (workflow.containerEngine == 'singularity'){
            containerOptions = "--writable"
       }
    }
    withName: CELLRANGER_MKREF{
       container "nfcore/universc:1.2.4"
       if (workflow.containerEngine == 'docker'){
             containerOptions = "--user root"
       }
       if (workflow.containerEngine == 'singularity'){
              containerOptions = "--writable"
       }
    }

}
